!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("redux"),require("memoize-one"),require("immer"),require("redux-thunk"),require("react")):"function"==typeof define&&define.amd?define(["exports","redux","memoize-one","immer","redux-thunk","react"],t):t((e=e||self).EasyPeasy={},e.Redux,e.memoizeOne,e.immer,e.ReduxThunk,e.React)}(this,function(e,P,r,k,A,a){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r,k=k&&k.hasOwnProperty("default")?k.default:k,A=A&&A.hasOwnProperty("default")?A.default:A;var o="default"in a?a.default:a;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){T(t,e,n[e])})}return t}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw u}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var q=function(e){return null!==e&&"object"===t(e)&&!Array.isArray(e)},C="__effect__",I="__select__",M="__selectDependencies__",X="__selectState__",z="__reducer__",L=function(e,t){return e.reduce(function(e,t){return q(e)?e[t]:void 0},t)},U=function(r,e,o){r.reduce(function(e,t,n){return n+1===r.length?e[t]=o:e[t]=e[t]||{},e[t]},e)},V=function(e,t){return e.substr(0,t.length)===t},f=a.createContext();e.createStore=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.devTools,d=void 0===n||n,r=t.middleware,o=void 0===r?[]:r,u=t.initialState,s=void 0===u?{}:u,p=t.injections,i=t.compose,c=t.reducerEnhancer,a=void 0===c?function(e){return e}:c,f=N({},e,{logFullState:function(e){console.log(JSON.stringify(e,null,2))}}),y={},v={},h={},m={},b={},g=[],_=[];!function a(f,l){return Object.keys(f).forEach(function(e){var n=f[e],r=[].concat(D(l),[e]);if("function"==typeof n)if(n[I])n[X]={parentPath:l,key:e,executed:!1},_.push(n);else if(n[C]){var t="@effect.".concat(r.join(".")),o=function(e){return d&&y.dispatch({type:t,payload:e}),n(y.dispatch,e,y.getState,p,{parent:l,path:r})};o.actionName=t,U(r,h,o),U(r,m,function(e){return new Promise(function(e){return setTimeout(e)}).then(function(){return y.dispatch(function(){return o(e)})})})}else if(n[z])g.push({path:r,reducer:n});else{var u="@action.".concat(r.join(".")),i=function(e,t){return k(e,function(e){return n(e,t,{dispatch:y.dispatch,dispatchLocal:L(r,y.dispatch),getState:y.getState})})};i.actionName=u,U(r,b,i),U(r,m,function(e){return y.dispatch({type:i.actionName,payload:e})})}else if(q(n)&&0<Object.keys(n).length)a(n,r);else{var c=L(l,s);U(r,v,c&&e in c?c[e]:n)}})}(f,[]);var l,O,S,j,w=(l=function t(r,c){var a=Object.keys(r).reduce(function(e,t){var n=r[t];return"function"!=typeof n||n[C]?e:[].concat(D(e),[n])},[]),f=Object.keys(r).reduce(function(e,t){return q(r[t])?[].concat(D(e),[t]):e},[]).map(function(e){return[e,t(r[e],[].concat(D(c),[e]))]});return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:L(c,v),t=1<arguments.length?arguments[1]:void 0;if(V(t.type,"@effect."))return e;if(0<c.length&&!V(t.type,"@action.".concat(c.join("."))))return e;var n=a.find(function(e){return e.actionName===t.type});if(n)return n(e,t.payload);for(var r=0;r<f.length;r+=1){var o=R(f[r],2),u=o[0],i=(0,o[1])(e[u],t);if(e[u]!==i)return N({},e,T({},u,i))}return e}}(b,[]),O=0<g.length?function(e,u){var t=l(e,u);return k(t,function(o){g.forEach(function(e){var t=e.path,n=e.reducer,r=L(t,o);U(t,o,n(r,u))})})}:l,S=function e(t,n){var r=n[X],o=r.parentPath,u=r.key;if(r.executed)return t;var i=n[M],c=i?i.reduce(e,t):t,a=t;if(0<o.length){var f=L(o,c);if(f){var l=n(f);a=k(t,function(e){L(o,e)[u]=l})}}else{var d=n(c);a=k(t,function(e){e[u]=d})}return n[X].executed=!0,a},j=!0,0<_.length?function(e,t){var n,r=O(e,t);if(e!==r||j){var o=(n=r,_.reduce(S,n));return j=!1,_.forEach(function(e){e[X].executed=!1}),o}return r}:O),E=i||(d&&"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:P.compose),x=P.createStore(a(w),v,E(P.applyMiddleware.apply(void 0,[A].concat(D(o)))));return Object.keys(m).forEach(function(e){x.dispatch[e]=m[e]}),y.dispatch=x.dispatch,y.getState=x.getState,y.getState.getState=x.getState,x},e.effect=function(e){return e[C]=!0,e},e.reducer=function(e){return e[z]=!0,e},e.select=function(t,e){var n=r(function(e){return t(e)});return n[I]=!0,n[M]=e,n[X]={},n},e.StoreProvider=function(e){var t=e.children,n=e.store;return o.createElement(f.Provider,{value:n},t)},e.useAction=function(e){return e(a.useContext(f).dispatch)},e.useStore=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=a.useContext(f),t=R(a.useState(n(r.getState())),2),o=t[0],u=t[1],i=a.useRef(o),c=a.useRef(!0);return a.useEffect(function(){var e=function(){var e=n(r.getState());c.current=!0,e===i.current||q(e)&&q(i.current)&&function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var u=Object.keys(e),i=Object.keys(t);if(u.length!==i.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),a=0;a<u.length;a++){var f=u[a];if(!c(f))return!1;var l=e[f],d=t[f];if(!1===(o=n?n.call(r,l,d,f):void 0)||void 0===o&&l!==d)return!1}return!0}(e,i.current)||(i.current=e,setTimeout(function(){c.current&&u(e)}))};e();var t=r.subscribe(e);return function(){t(),c.current=!1}},e),o},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=easy-peasy.min.js.map
